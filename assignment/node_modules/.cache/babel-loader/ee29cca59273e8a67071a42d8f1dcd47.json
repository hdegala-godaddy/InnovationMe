{"ast":null,"code":"import ThresholdFetchService from './ThresholdFetchService';\n\nfunction Node(empDetails) {\n  if (!empDetails) return null;\n  let obj = {};\n  obj[empDetails.name] = {\n    'id': empDetails.id,\n    'reports': []\n  };\n  return obj;\n}\n\nclass EmpFetchService {\n  constructor(empId) {\n    //this.empTree = new Map();\n    this.empIDToTreeNodeMap = new Map();\n    this.initialEmpId = empId;\n  }\n\n  insertIntoTree(parentEmpId, empId, node) {\n    this.empIDToTreeNodeMap.set(empId, node);\n\n    if (parentEmpId) {\n      let parentNode = this.empIDToTreeNodeMap.get(parentEmpId);\n      parentNode.reports.push(node);\n    }\n  }\n\n  async fetchAndFillEmpDetails(empId = this.initialEmpId, parentEmpId = null) {\n    try {\n      let empDetails = await ThresholdFetchService.fetch(empId);\n      let treeNode = new Node(empDetails);\n      this.insertIntoTree(parentEmpId, empId, treeNode);\n      empDetails.reports.forEach((id, empId) => {\n        if (!this.empIDToTreeNodeMap.has(id)) {\n          this.fetchAndFillEmpDetails(id, empId);\n        }\n      });\n    } catch (excp) {\n      alert(excp);\n    }\n\n    return this.empIDToTreeNodeMap;\n  }\n\n}\n\nexport default EmpFetchService;","map":{"version":3,"sources":["/Users/harshadegala/Code/React/assignment/src/EmpFetchService.js"],"names":["ThresholdFetchService","Node","empDetails","obj","name","id","EmpFetchService","constructor","empId","empIDToTreeNodeMap","Map","initialEmpId","insertIntoTree","parentEmpId","node","set","parentNode","get","reports","push","fetchAndFillEmpDetails","fetch","treeNode","forEach","has","excp","alert"],"mappings":"AAAA,OAAOA,qBAAP,MAAkC,yBAAlC;;AAGA,SAASC,IAAT,CAAcC,UAAd,EAAyB;AACrB,MAAI,CAACA,UAAL,EACI,OAAO,IAAP;AAEJ,MAAIC,GAAG,GAAG,EAAV;AACAA,EAAAA,GAAG,CAACD,UAAU,CAACE,IAAZ,CAAH,GAAuB;AACnB,UAAOF,UAAU,CAACG,EADC;AAEnB,eAAY;AAFO,GAAvB;AAIA,SAAOF,GAAP;AACH;;AAED,MAAMG,eAAN,CAAqB;AAEjBC,EAAAA,WAAW,CAACC,KAAD,EAAO;AACd;AACA,SAAKC,kBAAL,GAA0B,IAAIC,GAAJ,EAA1B;AACA,SAAKC,YAAL,GAAoBH,KAApB;AACH;;AAEDI,EAAAA,cAAc,CAACC,WAAD,EAAaL,KAAb,EAAmBM,IAAnB,EAAwB;AAElC,SAAKL,kBAAL,CAAwBM,GAAxB,CAA4BP,KAA5B,EAAmCM,IAAnC;;AACA,QAAID,WAAJ,EAAiB;AACb,UAAIG,UAAU,GAAG,KAAKP,kBAAL,CAAwBQ,GAAxB,CAA4BJ,WAA5B,CAAjB;AACAG,MAAAA,UAAU,CAACE,OAAX,CAAmBC,IAAnB,CAAwBL,IAAxB;AACH;AACJ;;AAED,QAAMM,sBAAN,CAA6BZ,KAAK,GAAG,KAAKG,YAA1C,EAAwDE,WAAW,GAAG,IAAtE,EAA2E;AAEvE,QAAI;AACA,UAAIX,UAAU,GAAG,MAAMF,qBAAqB,CAACqB,KAAtB,CAA4Bb,KAA5B,CAAvB;AACA,UAAIc,QAAQ,GAAG,IAAIrB,IAAJ,CAASC,UAAT,CAAf;AACA,WAAKU,cAAL,CAAoBC,WAApB,EAAiCL,KAAjC,EAAwCc,QAAxC;AAEApB,MAAAA,UAAU,CAACgB,OAAX,CAAmBK,OAAnB,CAA2B,CAAClB,EAAD,EAAKG,KAAL,KAAe;AACtC,YAAI,CAAC,KAAKC,kBAAL,CAAwBe,GAAxB,CAA4BnB,EAA5B,CAAL,EAAsC;AAClC,eAAKe,sBAAL,CAA4Bf,EAA5B,EAA+BG,KAA/B;AACH;AACJ,OAJD;AAMH,KAXD,CAWE,OAAMiB,IAAN,EAAY;AACVC,MAAAA,KAAK,CAACD,IAAD,CAAL;AACH;;AAED,WAAO,KAAKhB,kBAAZ;AACH;;AAnCgB;;AAsCrB,eAAeH,eAAf","sourcesContent":["import ThresholdFetchService from './ThresholdFetchService';\n\n\nfunction Node(empDetails){\n    if (!empDetails)\n        return null;\n\n    let obj = {};\n    obj[empDetails.name] = {\n        'id' : empDetails.id,\n        'reports' : []\n    };\n    return obj;\n}\n\nclass EmpFetchService{\n\n    constructor(empId){\n        //this.empTree = new Map();\n        this.empIDToTreeNodeMap = new Map();\n        this.initialEmpId = empId;\n    }\n\n    insertIntoTree(parentEmpId,empId,node){\n        \n        this.empIDToTreeNodeMap.set(empId, node);\n        if (parentEmpId) {\n            let parentNode = this.empIDToTreeNodeMap.get(parentEmpId);\n            parentNode.reports.push(node);\n        }\n    }\n\n    async fetchAndFillEmpDetails(empId = this.initialEmpId, parentEmpId = null){\n\n        try {\n            let empDetails = await ThresholdFetchService.fetch(empId);\n            let treeNode = new Node(empDetails);\n            this.insertIntoTree(parentEmpId, empId, treeNode);\n            \n            empDetails.reports.forEach((id, empId) => {\n                if (!this.empIDToTreeNodeMap.has(id)) {\n                    this.fetchAndFillEmpDetails(id,empId);\n                }\n            });\n\n        } catch(excp) {\n            alert(excp);\n        }\n\n        return this.empIDToTreeNodeMap;\n    }\n}\n\nexport default EmpFetchService;\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}